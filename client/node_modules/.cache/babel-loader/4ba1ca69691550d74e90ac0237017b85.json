{"ast":null,"code":"import _regeneratorRuntime from \"/Users/brettfitzpatrick/Desktop/Bootcamp/Projects/Mountain-Planner/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/brettfitzpatrick/Desktop/Bootcamp/Projects/Mountain-Planner/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/brettfitzpatrick/Desktop/Bootcamp/Projects/Mountain-Planner/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/brettfitzpatrick/Desktop/Bootcamp/Projects/Mountain-Planner/client/src/pages/Day.js\";\nimport React, { useState, useRef } from \"react\";\nimport { DateUtils } from \"react-day-picker\";\nimport DayPickerInput from 'react-day-picker/DayPickerInput';\nimport 'react-day-picker/lib/style.css';\nimport { useHistory } from \"react-router-dom\";\nimport { Col, Row, Container } from \"../components/Grid\";\nimport API from \"../utils/API\";\n\nfunction Day() {\n  var _useState = useState({\n    make: \"\",\n    model: \"\",\n    year: \"\",\n    color: \"\",\n    seats: \"\"\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      car = _useState2[0],\n      setCar = _useState2[1];\n\n  var _useState3 = useState(undefined),\n      _useState4 = _slicedToArray(_useState3, 2),\n      selectedDay = _useState4[0],\n      setSelectedDay = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      mountain = _useState6[0],\n      setMountain = _useState6[1];\n\n  var history = useHistory();\n  var mountainRef = useRef();\n\n  var handleDayChange = function handleDayChange(day) {\n    setSelectedDay(day);\n  };\n\n  var handleMountain = function handleMountain(event) {\n    setMountain(event.target.value);\n    console.log(event.target.value);\n  };\n\n  var handleSubmit = function handleSubmit(event) {\n    event.preventDefault();\n    console.log(mountain);\n    console.log(selectedDay);\n\n    if (mountain === \"\" || !selectedDay) {\n      alert(\"must select both a date and mountain\");\n      return;\n    } else if (DateUtils.isFutureDay(selectedDay) === false) {\n      alert(\"cannot select a date that has already happened\");\n      return;\n    } else {\n      handleBooking(mountain, selectedDay);\n    }\n  };\n\n  var handleBooking = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(mountain, selectedDay) {\n      var userProfile, username, userCar, carSeats;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              userProfile = JSON.parse(localStorage.getItem(\"currentUser\"));\n              username = userProfile.username;\n              _context.next = 4;\n              return storeCar();\n\n            case 4:\n              userCar = JSON.parse(localStorage.getItem(\"currentCar\"));\n              console.log(userCar);\n              carSeats = userCar.seats;\n              API.bookTrip(username, mountain, selectedDay, carSeats).then(function () {\n                console.log(\"check database trip should book\");\n                history.push(\"/profile\");\n              }).catch(function (err) {\n                console.log(err);\n              });\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleBooking(_x, _x2) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var storeCar = function storeCar() {\n    API.findUserCar().then(function (response) {\n      console.log(response);\n      var userProfile = JSON.parse(localStorage.getItem(\"currentUser\"));\n      var username = userProfile.username;\n      console.log(username);\n\n      for (var i = 0; i < response.data.userCar.length; i++) {\n        if (response.data.userCar[i].username === username) {\n          var currentCar = {\n            username: response.data.userCar[i].username,\n            make: response.data.userCar[i].make,\n            model: response.data.userCar[i].model,\n            year: response.data.userCar[i].year,\n            color: response.data.userCar[i].color,\n            seats: response.data.userCar[i].seats\n          };\n          console.log(currentCar);\n          localStorage.setItem('currentCar', JSON.stringify(currentCar));\n        }\n      }\n    }).catch(function (err) {\n      console.log(err);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(Container, {\n    fluid: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    size: \"md-10\",\n    className: \"rounded border border-secondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }\n  }, \"Plan a trip\"), /*#__PURE__*/React.createElement(\"form\", {\n    className: \"form signup-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 15\n    }\n  }, selectedDay && /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 33\n    }\n  }, \"Day: \", selectedDay.toLocaleDateString()), !selectedDay && /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 34\n    }\n  }, \"Choose a day\"), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"day-trip\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 17\n    }\n  }, \"What Day?:\"), /*#__PURE__*/React.createElement(DayPickerInput, {\n    id: \"day-trip\",\n    onDayChange: handleDayChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"mountains-trip\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 17\n    }\n  }, \"What Mountain?:\"), /*#__PURE__*/React.createElement(\"select\", {\n    className: \"form-control\",\n    id: \"mountains-trip\",\n    name: \"mountains\",\n    onChange: handleMountain,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"A-Basin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 19\n    }\n  }, \"A-Basin\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"Aspen\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 19\n    }\n  }, \"Aspen\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"Breckenridge\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 19\n    }\n  }, \"Breckenridge\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"Copper Mountain\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 19\n    }\n  }, \"Copper Mountain\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"Crested Butte\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 19\n    }\n  }, \"Crested Butte\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"Eldora\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 19\n    }\n  }, \"Eldora\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"Keystone\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 19\n    }\n  }, \"Keystone\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"Loveland\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 19\n    }\n  }, \"Loveland\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"Steamboat\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 19\n    }\n  }, \"Steamboat\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"Telluride\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 19\n    }\n  }, \"Telluride\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"Vail\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 19\n    }\n  }, \"Vail\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-secondary\",\n    type: \"submit\",\n    onClick: function onClick(event) {\n      return handleSubmit(event);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 17\n    }\n  }, \"Book\"))))));\n}\n\nexport default Day;","map":{"version":3,"sources":["/Users/brettfitzpatrick/Desktop/Bootcamp/Projects/Mountain-Planner/client/src/pages/Day.js"],"names":["React","useState","useRef","DateUtils","DayPickerInput","useHistory","Col","Row","Container","API","Day","make","model","year","color","seats","car","setCar","undefined","selectedDay","setSelectedDay","mountain","setMountain","history","mountainRef","handleDayChange","day","handleMountain","event","target","value","console","log","handleSubmit","preventDefault","alert","isFutureDay","handleBooking","userProfile","JSON","parse","localStorage","getItem","username","storeCar","userCar","carSeats","bookTrip","then","push","catch","err","findUserCar","response","i","data","length","currentCar","setItem","stringify","toLocaleDateString"],"mappings":"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","sourcesContent":["import React, { useState, useRef } from \"react\";\nimport { DateUtils } from \"react-day-picker\";\nimport DayPickerInput from 'react-day-picker/DayPickerInput';\nimport 'react-day-picker/lib/style.css';\nimport { useHistory } from \"react-router-dom\";\nimport { Col, Row, Container } from \"../components/Grid\";\nimport API from \"../utils/API\";\n\nfunction Day() {\n  const [car, setCar] = useState({\n    make: \"\",\n    model: \"\",\n    year: \"\",\n    color: \"\",\n    seats: \"\"\n  });\n  const [selectedDay, setSelectedDay] = useState(undefined);\n  const [mountain, setMountain] = useState(\"\");\n\n  const history = useHistory();\n\n  const mountainRef = useRef();\n\n  const handleDayChange = ((day) => {\n\n    setSelectedDay(day)\n  });\n\n  const handleMountain = (event) => {\n    setMountain(event.target.value);\n    console.log(event.target.value);\n  }\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    console.log(mountain);\n    console.log(selectedDay);\n    if (mountain === \"\" || !selectedDay) {\n      alert(\"must select both a date and mountain\");\n      return;\n    } else if (DateUtils.isFutureDay(selectedDay) === false) {\n      alert(\"cannot select a date that has already happened\");\n      return;\n    } else {\n      handleBooking(mountain, selectedDay);\n    }\n  }\n\n  const handleBooking = async (mountain, selectedDay) => {\n    const userProfile = JSON.parse(localStorage.getItem(\"currentUser\"));\n    const username = userProfile.username;\n    await storeCar();\n    const userCar = JSON.parse(localStorage.getItem(\"currentCar\"));\n    console.log(userCar);\n    const carSeats = userCar.seats;\n    API.bookTrip(username, mountain, selectedDay, carSeats)\n      .then(() => {\n        console.log(\"check database trip should book\");\n        history.push(\"/profile\");\n      })\n      .catch(err => {\n        console.log(err)\n      });\n  }\n\n  const storeCar = () => {\n    API.findUserCar()\n      .then(response => {\n        console.log(response)\n        const userProfile = JSON.parse(localStorage.getItem(\"currentUser\"));\n        const username = userProfile.username;\n        console.log(username);\n        for (let i = 0; i < response.data.userCar.length; i++) {\n          if (response.data.userCar[i].username === username) {\n            let currentCar = {\n              username: response.data.userCar[i].username,\n              make: response.data.userCar[i].make,\n              model: response.data.userCar[i].model,\n              year: response.data.userCar[i].year,\n              color: response.data.userCar[i].color,\n              seats: response.data.userCar[i].seats\n            }\n            console.log(currentCar);\n\n            localStorage.setItem('currentCar', JSON.stringify(currentCar));\n          }\n        }\n\n      })\n      .catch(err => {\n        console.log(err)\n      });\n  }\n\n  return (\n    <Container fluid>\n        <Row>\n          <Col size=\"md-10\" className=\"rounded border border-secondary\">\n            <h2>Plan a trip</h2>\n\n            <form className=\"form signup-form\">\n              <div className=\"form-group\">\n                {selectedDay && <p>Day: {selectedDay.toLocaleDateString()}</p>}\n                {!selectedDay && <p>Choose a day</p>}\n                <label htmlFor=\"day-trip\">What Day?:</label>\n                <DayPickerInput id=\"day-trip\" onDayChange={handleDayChange} />\n              </div>\n              <div className=\"form-group\">\n                <label htmlFor=\"mountains-trip\">What Mountain?:</label>\n                <select className=\"form-control\" id=\"mountains-trip\" name=\"mountains\" onChange={handleMountain} >\n                  <option value=\"A-Basin\">A-Basin</option>\n                  <option value=\"Aspen\">Aspen</option>\n                  <option value=\"Breckenridge\">Breckenridge</option>\n                  <option value=\"Copper Mountain\">Copper Mountain</option>\n                  <option value=\"Crested Butte\">Crested Butte</option>\n                  <option value=\"Eldora\">Eldora</option>\n                  <option value=\"Keystone\">Keystone</option>\n                  <option value=\"Loveland\">Loveland</option>\n                  <option value=\"Steamboat\">Steamboat</option>\n                  <option value=\"Telluride\">Telluride</option>\n                  <option value=\"Vail\">Vail</option>\n                </select>\n              </div>\n              <div className=\"form-group\">\n                <button className=\"btn btn-secondary\" type=\"submit\" onClick={event => handleSubmit(event)} >Book</button>\n              </div>\n            </form>\n          </Col>\n        </Row>\n      </Container>\n  )\n}\n\nexport default Day;"]},"metadata":{},"sourceType":"module"}